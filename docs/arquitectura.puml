@startuml
!theme plain
skinparam packageStyle rectangle
skinparam shadowing false
skinparam defaultTextAlignment center
skinparam component {
  BackgroundColor<<core>> #E3F2FD
  BackgroundColor<<model>> #FFF3E0
  BackgroundColor<<panel>> #E8F5E9
  BackgroundColor<<registry>> #F3E5F5
  BorderColor black
}

title Arquitectura del MultiNotation Modeler

package "Núcleo" {
  [App Shell] <<core>>
  [Panel Manager] <<core>>
  [Storage Manager] <<core>>
  [Service Registry] <<registry>>
}

[MultiNotation Modeler] <<core>>

package "Modeladores" {
  [BPMN Modeler] <<model>>
  [PPINOT] <<model>>
  [RALPH] <<model>>
}

package "Módulos" {
  [PPIs Module] <<model>>
  [RASCI Module] <<model>>
}

package "Paneles" {
  [Panel PPI] <<panel>>
  [Panel RASCI] <<panel>>
}

[PANEL_REGISTRY] <<registry>>

' Relaciones principales
[App Shell] --> [MultiNotation Modeler] : inicializa
[Panel Manager] --> [MultiNotation Modeler] : gestiona
[Storage Manager] --> [MultiNotation Modeler] : persiste
[Service Registry] --> [MultiNotation Modeler] : servicios

[MultiNotation Modeler] --> [BPMN Modeler] : base
[MultiNotation Modeler] --> [PPINOT] : notación
[MultiNotation Modeler] --> [RALPH] : notación

[PPINOT] --> [PPIs Module] : gestiona
[RASCI Module] --> [RALPH] : mapea

[Panel Manager] --> [Panel PPI] : monta
[Panel Manager] --> [Panel RASCI] : monta
[PANEL_REGISTRY] --> [Panel Manager] : define

[Panel PPI] --> [PPIs Module] : controla
[Panel RASCI] --> [RASCI Module] : controla

note right of [MultiNotation Modeler]
  Coordinador central
  - Estado compartido
  - Orquesta notaciones
end note

note bottom of [RALPH]
  Solo notación
  (sin panel)
end note

@enduml