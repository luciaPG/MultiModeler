<div class="panel" id="rasci-panel" data-panel-type="rasci">
  <div class="panel-header">
    <div class="panel-title">
      <i class="fas fa-table"></i>
      <span>Matriz RASCI</span>
    </div>
    <div class="panel-actions">
      <button class="panel-btn" title="Ocultar"><i class="fas fa-eye-slash"></i></button>
      <button class="panel-btn" title="Solo este panel"><i class="fas fa-expand"></i></button>
    </div>
  </div>

  <div class="panel-tabs">
    <div class="tab active" data-tab="main" onclick="cambiarPestana('main')">Matriz RASCI</div>
    <div class="tab" data-tab="mapping" onclick="cambiarPestana('mapping')">Mapeo RALph</div>
    <div class="tab" data-tab="config" onclick="cambiarPestana('config')">Leyenda</div>
  </div>

  <div class="panel-content">
    <!-- PESTA√ëA 1: MATRIZ RASCI -->
    <div id="main-tab" class="tab-content active" style="display: flex;">
      <button class="btn btn-primary btn-full-width" onclick="reloadRasciMatrix()">
        <i class="fas fa-sync-alt"></i> Recargar Matriz
      </button>
      <div id="matrix-container"></div>
    </div>

    <!-- PESTA√ëA 2: MAPEO RALPH -->
    <div class="tab-content" id="mapping-tab">
      <div class="mapping-section">
        <h3>Mapeo RASCI ‚Üí RALph</h3>
        <p class="mapping-description">
          Convierte la matriz RASCI en elementos RALph en el diagrama BPMN.
          <strong>El mapeo es manual y se ejecuta solo al presionar el bot√≥n.</strong>
        </p>
        
        <!-- ‚ö†Ô∏è NOTA IMPORTANTE SOBRE MAPEO MANUAL -->
        <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 6px; padding: 12px; margin: 16px 0; font-size: 13px;">
          <strong>üîí MAPEO COMPLETAMENTE MANUAL:</strong><br>
          ‚Ä¢ El mapeo NO se ejecuta autom√°ticamente al escribir letras en la matriz<br>
          ‚Ä¢ El mapeo SOLO se ejecuta cuando presionas "Ejecutar Mapeo Manual"<br>
          ‚Ä¢ Puedes a√±adir roles poco a poco sin que se ejecute mapeo autom√°tico<br>
          ‚Ä¢ El estado se guarda autom√°ticamente, pero el mapeo es manual
        </div>
        
        <div class="mapping-options">
          <button class="btn btn-primary btn-full-width" onclick="executeRasciToRalphMapping()">
            <i class="fas fa-magic"></i>
            Ejecutar Mapeo Manual
          </button>
          
          <div class="mapping-info">
            <h4>Caracter√≠sticas del Mapeo Manual:</h4>
            <ul>
              <li><strong>Procesamiento Completo:</strong> Elimina elementos obsoletos y crea nuevos seg√∫n la matriz actual</li>
              <li><strong>Orden Correcto:</strong> Los elementos se insertan en el flujo: Tarea ‚Üí Consulta ‚Üí Aprobaci√≥n ‚Üí Informaci√≥n</li>
              <li><strong>Limpieza Autom√°tica:</strong> Elimina elementos especiales que ya no est√°n en la matriz</li>
              <li><strong>Control Manual:</strong> Solo se ejecuta cuando presionas el bot√≥n, no autom√°ticamente al escribir</li>
            </ul>
          </div>
        </div>
        
        <div class="test-buttons">
          <h4>Botones de Prueba:</h4>
          <button class="btn btn-warning btn-full-width" onclick="testSimpleCandI()" style="margin-top: 10px;">
            <i class="fas fa-flask"></i>
            Prueba Simple C e I
          </button>
          
          <button class="btn btn-info btn-full-width" onclick="testCandIRoles()" style="margin-top: 10px;">
            <i class="fas fa-vial"></i>
            Probar Roles C e I
          </button>
          
          <button class="btn btn-success btn-full-width" onclick="testIncrementalAddition()" style="margin-top: 10px;">
            <i class="fas fa-plus-circle"></i>
            Prueba Adici√≥n Incremental
          </button>
        </div>
        
        <div class="mapping-results" id="mapping-results" style="display: none;">
          <h4>Resultados del Mapeo:</h4>
          <pre id="mapping-log" class="mapping-log"></pre>
        </div>
      </div>
    </div>

    <!-- PESTA√ëA 3: LEYENDA -->
    <div id="config-tab" class="tab-content" style="display: none;">
      <div class="rasci-legend">
        <div class="legend-header">
          <h3 class="legend-title">Matriz RACI - Gu√≠a de Responsabilidades</h3>
          <p class="legend-subtitle">&emsp;Asigna claramente las responsabilidades para cada tarea del proceso</p>
        </div>
        
        <div class="legend-item r">
          <span class="legend-color r">R</span>
          <div class="legend-content">
            <div class="legend-name">Responsable (Responsible)</div>
            <div class="legend-description">Persona que ejecuta y realiza la tarea. Es quien hace el trabajo necesario para completar la actividad.</div>
          </div>
        </div>
        
        <div class="legend-item a">
          <span class="legend-color a">A</span>
          <div class="legend-content">
            <div class="legend-name">Aprobador (Accountable)</div>
            <div class="legend-description">Persona que rinde cuentas del resultado. Aprueba o rechaza el trabajo y es el responsable final del √©xito.</div>
          </div>
        </div>
        
        <div class="legend-item s">
          <span class="legend-color s">S</span>
          <div class="legend-content">
            <div class="legend-name">Soporte (Support)</div>
            <div class="legend-description">Persona que proporciona recursos, herramientas o asistencia necesaria para completar la tarea.</div>
          </div>
        </div>
        
        <div class="legend-item c">
          <span class="legend-color c">C</span>
          <div class="legend-content">
            <div class="legend-name">Consultado (Consulted)</div>
            <div class="legend-description">Persona cuya opini√≥n se busca antes de tomar decisiones. Proporciona input y expertise.</div>
          </div>
        </div>
        
        <div class="legend-item i">
          <span class="legend-color i">I</span>
          <div class="legend-content">
            <div class="legend-name">Informado (Informed)</div>
            <div class="legend-description">Persona que debe ser notificada sobre las decisiones y avances, pero no participa activamente.</div>
          </div>
        </div>
      </div>
    </div>
  </div>


</div>
